(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{443:function(e,t,n){var content=n(586);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(18).default)("021b221e",content,!0,{sourceMap:!1})},585:function(e,t,n){"use strict";n(443)},586:function(e,t,n){var o=n(17)((function(i){return i[1]}));o.push([e.i,".btn-box-two[data-v-ec048058]{align-items:center;border:1px solid #1967d2!important;color:#1967d2!important;display:flex;height:4rem;justify-content:center;margin:0 auto;width:90%}.login-container[data-v-ec048058]{border:1px solid #ccc;border-radius:8px;box-shadow:0 0 10px rgba(0,0,0,.1);margin:0 auto;max-width:400px;padding:20px}h1[data-v-ec048058]{text-align:center}.login-method[data-v-ec048058],h1[data-v-ec048058]{margin-bottom:20px}input[data-v-ec048058]{border:1px solid #ccc;border-radius:4px;margin-bottom:10px;margin-top:5px}button[data-v-ec048058],input[data-v-ec048058]{padding:10px;width:100%}button[data-v-ec048058]{background-color:#007bff;border:none;border-radius:4px;color:#fff;cursor:pointer}button[data-v-ec048058]:hover{background-color:#0056b3}",""]),o.locals={},e.exports=o},823:function(e,t,n){"use strict";n.r(t);var o=n(7),r=n(30),c=(n(54),n(43),n(149)),l=n(33),d=n(41),h=n(158),m=n(44),v=n(101),f={data:function(){return Object(r.a)(Object(r.a)(Object(r.a)(Object(r.a)(Object(r.a)(Object(r.a)({phone:"",otp:"",otpSent:!1,email:"",password:""},"phone",""),"appVerifier",""),"at",[]),"us",[]),"user",null),"datas",{})},methods:{loginWithFacebook:function(){return Object(o.a)(regeneratorRuntime.mark((function e(){var t,n,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,l.a.signInWithPopup(l.c);case 3:t=e.sent,n=t.credential.accessToken,o=t.user,console.log("User:",o),console.log("Token:",n),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.error("Error during Facebook login:",e.t0.message);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})))()},login:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(c.b)();case 3:e.user=t.sent,e.getData(e.user.email),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.error("Login failed",t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))()},getData:function(e){var t=this;return Object(o.a)(regeneratorRuntime.mark((function n(){var o;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return o=t,console.log("pocketbase"),n.next=4,m.a.collection("user_Phone_Google_Fb_Login").getFirstListItem("email='".concat(e,"'"),{}).then((function(e){e?(o.datas=e,o.getData2()):console.log("No data found for the given email.")})).catch((function(e){o.datas={email:""},o.getData2()}));case 4:o.datas=n.sent;case 5:case"end":return n.stop()}}),n)})))()},getData2:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){var data;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.datas.email!=e.user.email){t.next=7;break}v.set("setUser",e.user.email),e.$store.commit("phone",e.user.email),Object(h.Message)({showClose:!0,message:"Login Successful!",type:"success"}),history.back(),t.next=12;break;case 7:return console.log(e.user),data={userId:e.user.email,email:e.user.email,phone:e.user.phone,name:e.user.displayName,about:"",login_type:"Email_Auth",avatar:"",subscription:[],active:!0,block:!0,free_ad:1},t.next=11,m.a.collection("user_Phone_Google_Fb_Login").create(data).then((function(){v.set("setUser",e.user.email),e.$store.commit("phone",e.user.email),Object(h.Message)({showClose:!0,message:"Login Successful!",type:"success"}),history.back()}));case 11:t.sent;case 12:case"end":return t.stop()}}),t)})))()},sendOtp:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){var n,data,o,r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if((n=e).otpSent=!0,n.s1=!1,10==n.phone.length){t.next=7;break}Object(h.Message)({showClose:!0,message:"Phone Number is Invalid!",type:"warning"}),t.next=18;break;case 7:return n.seen=!0,data={phone:n.phone},o={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(data)},t.next=13,fetch("https://selby.in/api/sendOtp",o);case 13:return r=t.sent,t.next=16,r.json();case 16:t.sent,r.ok?Object(h.Message)({showClose:!0,message:"Otp sent Succcessfully!",type:"success"}):Object(h.Message)({showClose:!0,message:"Otp not sent!",type:"warning"});case 18:case"end":return t.stop()}}),t)})))()},verifyOtp:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){var n,data;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(6!=(n=e).otp.length){t.next=25;break}return t.prev=2,t.next=5,m.a.collection("otp").getFirstListItem('phone="'.concat(n.phone,'" && otp="').concat(n.otp,'"'),{});case 5:if(t.sent,n.us=n.us.filter((function(e){return e.phone==n.phone})),0!=n.us.length){t.next=14;break}return data={userId:n.phone,email:"",phone:n.phone,name:"Selby User",about:"",login_type:"Phone_Auth",subscription:[],active:!0,block:!0,free_ad:1},t.next=11,m.a.collection("user_Phone_Google_Fb_Login").create(data).then((function(e){Object(h.Message)({showClose:!0,message:"Login Successful!",type:"success"}),history.back()})).catch((function(e){Object(h.Message)({showClose:!0,message:"Insert Correct Data!",type:"warning"})}));case 11:t.sent,t.next=18;break;case 14:v.set("setUser",n.phone),n.$store.commit("phone",n.phone),Object(h.Message)({showClose:!0,message:"Login Successful!",type:"success"}),history.back();case 18:t.next=23;break;case 20:t.prev=20,t.t0=t.catch(2),Object(h.Message)({showClose:!0,message:"Invalid Otp!",type:"warning"});case 23:t.next=26;break;case 25:Object(h.Message)({showClose:!0,message:"Invalid Otp!",type:"warning"});case 26:case"end":return t.stop()}}),t,null,[[2,20]])})))()}},mounted:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.user=d.a.auth().currentUser,d.a.auth().onAuthStateChanged((function(t){e.user=t}));case 2:case"end":return t.stop()}}),t)})))()}},x=(n(585),n(12)),component=Object(x.a)(f,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"login-container"},[t("h1",[e._v("Login")]),e._v(" "),t("div",{staticClass:"login-method"},[t("label",{attrs:{for:"phone"}},[e._v("Phone Number")]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.phone,expression:"phone"}],attrs:{type:"text",id:"phone",placeholder:"Enter your phone number"},domProps:{value:e.phone},on:{input:function(t){t.target.composing||(e.phone=t.target.value)}}}),e._v(" "),t("button",{on:{click:e.sendOtp}},[e._v("Send OTP")])]),e._v(" "),e.otpSent?t("div",{staticClass:"otp-section"},[t("label",{attrs:{for:"otp"}},[e._v("Enter OTP")]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.otp,expression:"otp"}],attrs:{type:"text",id:"otp",placeholder:"Enter OTP"},domProps:{value:e.otp},on:{input:function(t){t.target.composing||(e.otp=t.target.value)}}}),e._v(" "),t("button",{on:{click:e.verifyOtp}},[e._v("Verify OTP")])]):e._e(),e._v(" "),t("div",{staticClass:"login-method"},[t("button",{on:{click:e.loginWithFacebook}},[e._v("Login with Facebook")])]),e._v(" "),t("div",{staticClass:"login-method"},[t("div",{on:{click:e.login}}),e._v(" "),t("div",{staticClass:"g_id_signin",attrs:{"data-type":"standard"}})]),e._v(" "),t("div",{staticClass:"btn-box-two",on:{click:e.login}},[t("div",{staticClass:"social-btns"},[t("mdicon",{attrs:{width:"14",height:"14",name:"google"}}),e._v("Â Sign In\n    ")],1)])])}),[],!1,null,"ec048058",null);t.default=component.exports}}]);